# Notas 109 - Redes

## Usar el bridge por defecto

*Docker* establece un adaptador (*driver*) de red por defecto donde todos los contenedores tienen una IP asignada, generalmente `172.16.x.x`.

Este adaptador le permitirá a cualquier contenedor consumir vía IP los servicios expuestos por otros contenedores y así tener comunicación interna.

En *Docker Swarm* por ejemplo, podemos establecer contenedores en diferentes nodos (*hosts*) en la nube y *Docker* asumirá que la red interna se preserva, es decir, un contenedor en la *Máquina A* tendrá acceso a un contendor en *Máquina B* siempre que estén en la misma red, sin importar si están en diferentes máquinas.

> Ejemplo de un contenedor de tipo *Nginx* montado en red por defecto

```bash
docker run --name my-nginx -d nginx

# Consulta la IP interna mediante `docker container inspect my-nginx`
# ~ 172.17.0.2
```

> Ejemplo de un contenedor de tipo *Httpd* montado en la red por defecto

```bash
docker run --name my-httpd -d httpd

# Consulta la IP interna mediante `docker container inspect my-httpd`
# 172.17.0.4
```

> Ejemplo para consultar el `httpd` desde *Nginx*

```bash
docker exec -it my-nginx bash

root@my-nginx# curl 172.17.0.4:80

# --- SALIDA ---
# <h1>It works!</h1>
```

> Ejemplo para consultar el `nginx` desde *Httpd*

```bash
docker exec -it my-httpd bash

root@my-httpd# apt update
root@my-httpd# apt install curl
root@my-httpd# curl 172.17.0.2:80

# --- SALIDA ---
# <h1>Welcome to nginx!</h1>
```

## Crear un bridge personalizado

Podemos crear una red personalizada para que los contenedores tengan acceso aislado entre ellos, pero otros contenedores no sean parte de la red. Esto nos permitirá determinar si tienen acceso a internet los contenedores, si tienen acceso a las IP del anfitrión o si tienen acceso sólo entre ellas, a estos modos o mecanismos se les considera el `drivers`.

Tipo Driver | Descripción
--- | ---
`bridge` | Tiene acceso a internet y acceso interno entre contenedores
`host` | Tiene acceso a la red del *Host* y sus IP
`null` | Sólo tiene acceso entre contenedores

## Ejecutar contenedores en la misma red

## Caso práctico